@model IEnumerable<WarrenHills01.Entidades.TareaSemanaUsuarios>


@{
    ViewBag.Title = "MisTareas";
    Layout = "~/Views/Shared/_Layout2.cshtml";
}


<!--Loader de actualizacion de tarea-->
@*<div id="divLoading" style="margin: 0px; padding: 0px; position: fixed; right: 0px;
        top: 0px; width: 100%; height: 100%; background-color: transparent; z-index: 30001;
        opacity: .8; filter: alpha(opacity=70);display:none">
        <p style="position: absolute; top: 50%; left: 50%; color:white;">
            <iframe src="https://giphy.com/embed/3oEjI6SIIHBdRxXI40" width="480" height="480" frameBorder="0" class="giphy-embed" allowFullScreen></iframe>

        </p>
    </div>*@



@if (@ViewBag.TareaHecha != null)
{

    <div class="alert alert-warning alert-dismissible fade show shadow" role="alert">
        Tarea <strong>@ViewBag.TareaHecha</strong> completada exitosamente
        <button type="button" class="btn-close" data-bs-dismiss="alert" aria-label="Close"></button>
    </div>
}


<div class="card mb-3" style="border:none">
    <img src="~/Img/5625651.jpg" class="card-img-top" alt="...">
    <div class="card-body">
        <h5 class="card-title text-success">@ViewBag.Message</h5>
        <p class="card-text"><small class="text-muted">"La disciplina proviene de combinar con exito tres elementos: <br>orden, limpieza y puntualidad"</small></p>


    </div>
</div>

<div class="container-fluid mb-4">
    <div class="row justify-content-center">
        <div class="col-md-12 " style="width:90%">
            <div class="card shadow" id="Tabla1">
                <div class="card-header card-header-primary" id="HeaderTablaInicio1">
                    <h4 class="card-title ">Mis Tareas Domesticas</h4>
                    <p class="card-category">Cuando toca , toca</p>
                </div>
                <div class="card-body">
                    <div class="table-responsive">
                        <table class="table table-hover">
                            <thead class=" text-primary">
                            <th>
                                Tarea
                            </th>
                            <th>
                                Dia Semana
                            </th>
                            <th class="text-center">
                                Acción
                            </th>

                            </thead>
                            <tbody>
                                @{int contador = 0;}


                                @foreach (var item in Model)
                                {
                                    contador++;
                                    <tr>
                                        <td>
                                            @item.Tarea
                                        </td>
                                        <td>
                                            @item.DiaSemana
                                        </td>
                                        <td>

                                            <div class="row justify-content-center ">
                                                <div class="col-sm-4 pb-1">
                                                    <button type="button" class="form-control btn btn-success submit px-3 " data-bs-toggle="modal" data-bs-target="@("#exampleModal"+contador)">Completar</button>

                                                    <!-- Modal -->
                                                    @if (@item.Tarea == "Limipieza")
                                                    {
                                                        <div class="modal fade" id="@("exampleModal"+ contador)" tabindex="-1" aria-labelledby="exampleModalLabel" aria-hidden="true">
                                                            <div class="modal-dialog">
                                                                <div class="modal-content">
                                                                    <div class="modal-header">
                                                                        <h5 class="modal-title" id="exampleModalLabel"><span class="text-danger">Importante !</span></h5>
                                                                        <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
                                                                    </div>
                                                                    <div class="modal-body">
                                                                        Algun comentario antes de finalizar <span id="tarea">@item.Tarea</span> ?
                                                                        <textarea id="comentarioTarea" class="form-control mt-2" aria-label="With textarea"></textarea>
                                                                    </div>

                                                                    <div class="modal-footer">
                                                                        <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Cerrar</button>
                                                                        <button type="button" class="btn btn-primary" onclick="finalizaTarea1()">Realizar tarea</button>
                                                                        @*<button type="button" class="btn btn-primary" onclick="finalizaTarea()">Realizar tarea</button>*@

                                                                        <!--new { id = item.Tarea})-->
                                                                    </div>
                                                                </div>
                                                            </div>
                                                        </div>
                                                    }

                                                    @if (@item.Tarea == "Sacar Basura")
                                                    {
                                                        <div class="modal fade" id="@("exampleModal"+ contador)" tabindex="-1" aria-labelledby="exampleModalLabel" aria-hidden="true">
                                                            <div class="modal-dialog">
                                                                <div class="modal-content">
                                                                    <div class="modal-header">
                                                                        <h5 class="modal-title" id="exampleModalLabel"><span class="text-danger">Importante !</span></h5>
                                                                        <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
                                                                    </div>
                                                                    <div class="modal-body">
                                                                        Algun comentario antes de finalizar <span id="tarea2">@item.Tarea</span> ?
                                                                        <textarea id="comentarioTarea2" class="form-control mt-2" aria-label="With textarea"></textarea>
                                                                    </div>

                                                                    <div class="modal-footer">
                                                                        <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Cerrar</button>
                                                                        <button type="button" class="btn btn-primary" onclick="finalizaTarea2()">Realizar tarea</button>
                                                                        @*<button type="button" class="btn btn-primary" onclick="finalizaTarea()">Realizar tarea</button>*@

                                                                        <!--new { id = item.Tarea})-->
                                                                    </div>
                                                                </div>
                                                            </div>
                                                        </div>
                                                    }

                                                </div>

                                                <div class="col-sm-4 ">
                                                    <button type="button" class="form-control btn btn-primary submit px-3" data-bs-toggle="modal" data-bs-target="@("#exampleModalA" + contador)">Actualizar</button>

                                                    <!--Si es Limpieza-->
                                                    @if (@item.Tarea == "Limipieza")
                                                    {
                                                        <div class="modal fade" id="@("exampleModalA" + contador)" tabindex="-1" aria-labelledby="@("exampleModalLabelA" + contador)" aria-hidden="true">
                                                            <div class="modal-dialog">
                                                                <div class="modal-content">
                                                                    <div class="modal-header">
                                                                        <h5 class="modal-title" id="@("exampleModalLabelA" + contador)"><span class="text-danger">Importante !</span></h5>
                                                                        <button id="cierraCuadro" type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
                                                                    </div>



                                                                    <div class="modal-body">
                                                                        <span>Seguro que deseas actualizar @item.Tarea ?</span>
                                                                        <p>Selecciona un día</p>

                                                                        <div class="row">

                                                                            <div class="form-group mb-3 ">
                                                                                @Html.DropDownListFor(m => @item.DiaSemana, ViewBag.DiaSemana as IEnumerable<SelectListItem>, new { @class = "form-control", @id = "ItemId" })
                                                                            </div>


                                                                        </div>
                                                                        <div>
                                                                            @Html.HiddenFor(m => @item.Tarea, new { @id = "DescripTarea" })
                                                                        </div>

                                                                    </div>






                                                                    <div class="modal-footer">
                                                                        <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Cerrar</button>
                                                                        <button type="button" class="btn btn-primary" onclick=ActulizaTarea()>Actulizar tarea</button>
                                                                    </div>

                                                                </div>
                                                            </div>
                                                        </div>


                                                    }

                                                    <!---->
                                                    <!--Si es Basura-->
                                                    @if (@item.Tarea == "Sacar Basura")
                                                    {
                                                        <div class="modal fade" id="@("exampleModalA" + contador)" tabindex="-1" aria-labelledby="@("exampleModalLabelA" + contador)" aria-hidden="true">
                                                            <div class="modal-dialog">
                                                                <div class="modal-content">
                                                                    <div class="modal-header">
                                                                        <h5 class="modal-title" id="@("exampleModalLabelA" + contador)"><span class="text-danger">Importante !</span></h5>
                                                                        <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
                                                                    </div>



                                                                    <div class="modal-body">
                                                                        <span>Seguro que deseas actualizar @item.Tarea ?</span>
                                                                        <p>Selecciona un día</p>

                                                                        <div class="row">

                                                                            <div class="form-group mb-3 ">
                                                                                @Html.DropDownListFor(m => @item.DiaSemana, ViewBag.DiaSemana2 as IEnumerable<SelectListItem>, new { @class = "form-control", @id = "ItemId2" })
                                                                            </div>


                                                                        </div>
                                                                        <div>
                                                                            @Html.HiddenFor(m => @item.Tarea, new { @id = "DescripTarea2" })
                                                                        </div>

                                                                    </div>






                                                                    <div class="modal-footer">
                                                                        <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Cerrar</button>
                                                                        <button type="button" class="btn btn-primary" onclick=ActulizaTarea2()>Actulizar tarea</button>
                                                                    </div>

                                                                </div>
                                                            </div>
                                                        </div>


                                                    }

                                                    <!---->
                                                    <!-- Modal -->
                                                    @*<div class="modal fade" id="@("exampleModalA" + contador)" tabindex="-1" aria-labelledby="@("exampleModalLabelA" + contador)" aria-hidden="true">
                                                            <div class="modal-dialog">
                                                                <div class="modal-content">
                                                                    <div class="modal-header">
                                                                        <h5 class="modal-title" id="@("exampleModalLabelA" + contador)"><span class="text-danger">Importante !</span></h5>
                                                                        <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
                                                                    </div>
                                                                    @using (Html.BeginForm("ActualizaTarea", "Tarea", FormMethod.Post))
                                                                    {
                                                                        if (@item.Tarea == "Limipieza")
                                                                        {

                                                                            <div class="modal-body">
                                                                                <span>Seguro que deseas actualizar @item.Tarea ?</span>
                                                                                <p>Selecciona un día</p>

                                                                                <div class="row">

                                                                                    <div class="form-group mb-3 ">
                                                                                        @Html.DropDownListFor(m => @item.DiaSemana, ViewBag.DiaSemana as IEnumerable<SelectListItem>, new { @class = "form-control", @id = "ItemId" })
                                                                                    </div>


                                                                                </div>
                                                                                <div>
                                                                                    @Html.HiddenFor(m => @item.Tarea, new { @id = "DescripTarea" })
                                                                                </div>

                                                                            </div>


                                                                        }

                                                                        if (@item.Tarea == "Sacar Basura")
                                                                        {

                                                                            <div class="modal-body">
                                                                                <span>Seguro que deseas actualizar @item.Tarea ?</span>
                                                                                <p>Selecciona un día</p>
                                                                                <div class="row">

                                                                                    <div class="form-group mb-3 ">
                                                                                        @Html.DropDownListFor(m => @item.DiaSemana, ViewBag.DiaSemana2 as IEnumerable<SelectListItem>, new { @class = "form-control", @id = "ItemId" })
                                                                                    </div>


                                                                                </div>
                                                                                <div>
                                                                                    @Html.HiddenFor(m => @item.Tarea, new { @id = "DescripTarea" })
                                                                                </div>

                                                                            </div>


                                                                        }

                                                                        <div class="modal-footer">
                                                                            <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Cerrar</button>
                                                                            <button type="button" class="btn btn-primary" onclick=ActulizaTarea()>Actulizar tarea</button>
                                                                        </div>
                                                                    }
                                                                </div>
                                                            </div>
                                                        </div>*@
                                                    <!--Fin del modal-->

                                                </div>
                                            </div>


                                        </td>

                                    </tr>

                                }
                            </tbody>
                        </table>
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>

@Scripts.Render("/Funciones/Utilidades.js")